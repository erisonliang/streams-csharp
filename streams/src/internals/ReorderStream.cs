//======================================================================================================================
namespace hhlogic.streams.internals {
//----------------------------------------------------------------------------------------------------------------------
using System;
//======================================================================================================================


//======================================================================================================================
public sealed class ReorderStream<T> : AbstractStream<T>
{
  //--------------------------------------------------------------------------------------------------------------------
  private readonly Stream<T> underlyingStream;
  private readonly Func<Stream<T>, Stream<T>> reorder;
  //--------------------------------------------------------------------------------------------------------------------
  public ReorderStream(Stream<T> underlyingStream, Func<Stream<T>, Stream<T>> reorder)
  {
    this.underlyingStream = underlyingStream;
    this.reorder = reorder;
  }
  //--------------------------------------------------------------------------------------------------------------------
  public override bool forEachWhile(Predicate<T> f)
  {
    return reorder(underlyingStream).forEachWhile(f);
  }
  //--------------------------------------------------------------------------------------------------------------------
  public override Maybe<uint> fastCount()
  {
    return underlyingStream.fastCount();
  }
  //--------------------------------------------------------------------------------------------------------------------
  public override Maybe<T> last()
  {
    return reorder(underlyingStream).last();
  }
  //--------------------------------------------------------------------------------------------------------------------
  public override Maybe<T> head()
  {
    return reorder(underlyingStream).head();
  }
  //--------------------------------------------------------------------------------------------------------------------
  public override Stream<T> tail()
  {
    return reorder(underlyingStream).tail();
  }
  //--------------------------------------------------------------------------------------------------------------------
  public override Stream<T> snapshot()
  {
    return reorder(underlyingStream).snapshot();
  }
  //--------------------------------------------------------------------------------------------------------------------
}
//======================================================================================================================


//======================================================================================================================
} // End Namespace
//======================================================================================================================
